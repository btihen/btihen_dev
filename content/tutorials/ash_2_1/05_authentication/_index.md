---
# Title, summary, and page position.
linktitle: 0?-Authentication
summary: Ash's Data-Layer handles data Persistence within each resource.
weight: 1
icon: book-reader
icon_pack: fas

# Page metadata.
title: Data-Layer
date: '2022-11-04T00:00:00Z'
type: book # Do not modify.
draft: true
---

## TODO: Encrypted Data (Passwords)

[bcrypt](https://hexdocs.pm/bcrypt_elixir/Bcrypt.html)
[Simple encryption in Elixir](https://a4word.com/articles/safetybox)
[Alchemist Encryption](https://alchemist.camp/episodes/passwords-associations-statwatch)
[Phoenix Password Authenticcation](https://abulasar.com/api-authentication-in-elixir-phoenix-part-1)
[Phoenix Auth Practices](https://medium.com/wttj-tech/elixirs-best-practices-achieve-secure-authentication-8961f60effc7)

[Action DLS](https://hexdocs.pm/ash/Ash.Resource.Dsl.html)
[Lifecycle Actions](https://hexdocs.pm/ash/actions.html#create-update-destroy-actions)

```elixir
actions do
  create :signup do
    argument :password, :string
    argument :password_confirmation, :string
    validate confirm(:password, :password_confirmation)
    change {MyApp.HashPassword, []} # A custom implemented Change
  end
end
```

Zach Daniel â€” 11/14/2021
Yep, that sounds correct to me
nothing currently allows you to have an attribute that is write only and never read back when running queries
e.g it will still be present on the struct
but if its encrypted then thats not really problematic
but for example in cases where we're storing a password we have a password argument and a password_hash private/not-writable/sensitive attribute

```elixir
  attributes do
    # Add an autogenerated UUID primary key called `:id`.
  attributes do
    uuid_primary_key :id

    attribute :email, :string do
      allow_nil? false
      constraints [
        match: ~r/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$/
      ]
    end

    attribute :password_hash, :string do
      private? true
      writable? false
      sensitive? true
    end

    create_timestamp :inserted_at
    update_timestamp :updated_at
  end

  actions do
    create :signup do
      argument :password, :string
      argument :password_confirmation, :string
      validate confirm(:password, :password_confirmation)
      change {MyApp.HashPassword, []} # A custom implemented Change
    end
  end
```

# Resources

**Documentation**

* <https://www.ash-hq.org/>
* <https://hexdocs.pm/ash/get-started.html>
* <https://www.ash-hq.org/docs/guides/ash/2.4.1/tutorials/get-started.md>
* <https://github.com/phoenixframework/phoenix/blob/master/installer/README.md>

**Ash Framework 1.5** - Video and Slides

* <https://www.youtube.com/watch?v=2U3vQHXCF0s>
* <https://speakerdeck.com/zachsdaniel1/introduction-to-the-ash-framework-elixir-conf-2020?slide=6>
